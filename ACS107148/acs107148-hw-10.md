# HW-10
* 輸入`systemctl stop firewalld`關閉防火牆(先關以防萬一) 

![](https://i.imgur.com/zanwQHV.png)
* 使用cp複製sshd_config至sshd2_config。

 ![](https://i.imgur.com/2D4CI6e.png)
* 用vi進入sshd2_config並將#Port 22改為Port 2222。

 ![](https://i.imgur.com/vFxsUvz.png)
* 輸入`cd /etc/systemd/system`切換至/etc/systemd/system 
* 輸入`cp /usr/lib/systemd/system/sshd.service sshd2.service`將sshd.service的內容複製到sshd2.service 

![](https://i.imgur.com/InNwZEn.png)
* 輸入`vi sshd2.service`進入編輯模式。
* 在`Description=OpenSSH server daemon`後面加上一個中間加入2
* ExecStart=/usr/sbin/sshd -D $OPTIONS -f/etc/ssh/sshd2_config 

 ![](https://i.imgur.com/NQpNpZ9.png)
* 輸入`systemctl daemon-reload`重新讀取設定檔輸入`systemctl enable sshd2`設定重啟後，sshd2會被啟動輸入`systemctl start sshd2`啟動sshd2 

![](https://i.imgur.com/gBnaYhZ.png)
![](https://i.imgur.com/g9yrGJ9.png)
* 輸入`yum install policycoreutils-python`安裝semanage的套件。

![](https://i.imgur.com/8UxwizO.png)
![](https://i.imgur.com/lEx53wu.png)

* 輸入`semanage port -a -t ssh_port_t -p tcp 2222` 輸入`semanage port -l | grep ssh`檢查Port是否為2222

![](https://i.imgur.com/BLyKYBV.png)
* 輸入`systemctl start sshd2`重新啟動sshd2 

![](https://i.imgur.com/StPrN0E.png)
* 輸入`netstat -tlnp | grep ssh或netstat -alntp | grep ssh`確認是否有成功啟動兩個sshd服務

![](https://i.imgur.com/FIGKiTB.png)


