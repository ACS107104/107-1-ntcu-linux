#####  系統服務與伺服器架設
### 請仿照課堂上練習，透過systemd管理二個sshd服務，並讓第二個sshd服務的 port 放行於 2222。
    完成後可以使用指令 `netstat -alntp | grep ssh` 確認是否啟動二個sshd服務


## Note 1: CentOS有使用SELinux ，故預設只允許 SSH 使用埠號 22，若要使用埠號 2222，使請用下列指開啟並檢查

```
$ semanage port -a -t ssh_port_t -p tcp 2222
$ semanage port -l | grep ssh
ssh_port_t tcp 2202, 22
```  

## Note 2: CentOS預設的防火牆firewalld會禁止訪問埠號2222，若要透過2222埠連ssh，請先關閉firewalld。

1.  sshd 的設定檔位於 `/etc/ssh/sshd_config`
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/HW10-1.JPG)
2.  `vi sshd2_config`
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-2.JPG)
3.  修改啟動腳本服務檔
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/HW10-3.JPG)
4.  `vi sshd2.service`
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-4.JPG)
5.  下載semanage指令
  *  yum provides semanage
  *  yum install policycoreutils-python
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-5.JPG)
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-6.JPG)
6.  使用埠號 2222
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-7.JPG)
7.  重新啟動
![image](https://github.com/acs107102/107-1-ntcu-linux/blob/acs107102-patch-1/10-8.JPG)
8.  `netstat -alntp | grep ssh`查看